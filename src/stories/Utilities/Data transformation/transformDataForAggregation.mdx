import { Meta } from '@storybook/blocks';

<Meta title="Utilities/Data transformation/transformDataForAggregation" />

# transformDataForAggregation

Transforms the data for aggregation based on a key column and specified aggregation settings.

It groups the data by unique values in the key column and applies the aggregation methods to each group.

```ts
function transformDataForAggregation(
  data: any,
  keyColumn: string,
  aggregationSettings?: {
    column: string;
    aggregationMethod?: 'sum' | 'average' | 'min' | 'max';
  }[],
): object[] 
```

## Parameters

- `data` - The input data to be aggregated. Can be an array of objects, where each object represents a data row.
- `keyColumn` - The name of the column to group the data by (key column).
- `aggregationSettings` - Optional settings for the aggregation, specifying the column and aggregation method (e.g., 'average', 'max', 'min', 'sum'). Each setting can define a column and a corresponding aggregation method to apply to that column.

## Returns

An array of objects where each object contains the aggregated values for each unique value in the key column.

Each object includes the key column value, count of occurrences, and the aggregated values for each specified column.


## Example Usage

```js
// Example of how to use the function
const data = [
  { category: 'A', value: 10, amount: 5 },
  { category: 'A', value: 20, amount: 10 },
  { category: 'B', value: 15, amount: 7 },
];
const aggregationSettings = [
  { column: 'value', aggregationMethod: 'average' },
  { column: 'amount', aggregationMethod: 'sum' },
];
const transformedData = transformDataForAggregation(data, 'category', aggregationSettings);
console.log(transformedData);
// Result
// [
//   { category: 'A', count: 2, value: 15, amount: 15 },
//   { category: 'B', count: 1, value: 15, amount: 7 },
// ]